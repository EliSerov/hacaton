# Шаги создания агента (MVP)

1. **Сбор данных**: парсинг источников (Habr/Cnews/...) и сохранение в CSV.
2. **Нормализация**:
   - приведение строк к единому виду (trim/пробелы),
   - извлечение/нормализация `subtopic` в список тем.
3. **Чанкинг**:
   - разбиение `content` на фрагменты фиксированной длины (с overlap).
4. **Эмбеддинги**:
   - расчёт эмбеддингов для каждого chunk (`passage: ...`) и upsert в Qdrant.
5. **RAG по запросу**:
   - эмбеддинг запроса (`query: ...`),
   - поиск ближайших chunks в Qdrant + фильтры по payload,
   - агрегация chunks → статьи.
6. **Генерация ответа**:
   - сбор контекста из выдержек,
   - LLM генерирует краткое резюме + ссылки `[n]`.
7. **Дополнительные функции**:
   - recommendations: расширенный retrieval + исключение уже показанных источников,
   - quiz: генерация теста по топ-источникам.
8. **Интерфейс**:
   - Telegram-бот: ввод запроса, команды для фильтров, команды для доп. функций.
9. **Безопасность и наблюдаемость**:
   - allowlist в боте,
   - API key в AMQP headers,
   - структурированное логирование + trace_id.
